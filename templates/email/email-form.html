<form method="POST" enctype="multipart/form-data"
      action="{{ url_for('process_email') }}"
      onsubmit="return validateEmailForm(event)">
    <div class="mb-3">
        <label for="filesent" class="form-label fw-bold">
            Anexar arquivo (.txt ou .pdf):
        </label>
        <input id="filesent" type="file" class="form-control" name="file" accept=".pdf,.txt">
    </div>

    <div class="mb-3">
        <label for="txt" class="form-label fw-bold">
            Ou cole o texto aqui:
        </label>
        <textarea id="txt" class="form-control" name="text" rows="6" placeholder="Digite ou cole o conteúdo do e-mail"></textarea>
    </div>

    <p class="text-muted small mb-3">
        <i>
            Se você preencher o texto e anexar um arquivo, apenas o <strong>texto digitado</strong> será considerado para a análise.
        </i>
    </p>

    <div class="d-flex gap-2 mt-3">
        <!-- Botão SEMPRE visível -->
        <button type="submit" class="btn btn-success">
            <i class="fas fa-paper-plane me-2"></i>
            Analisar E-mail
        </button>

        <!-- Botões condicionais -->
        {% if resultado %}
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#textoModal">
            <i class="fas fa-eye me-2"></i>
            Ver Texto Analisado
        </button>

        <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#categoriasModal">
            <i class="fas fa-info-circle me-2"></i>
            Sobre as Categorias
        </button>
        {% endif %}
    </div>
</form>
